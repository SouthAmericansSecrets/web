(function(){function i(){if(!window.XMLHttpRequest||r){this._object=new window.ActiveXObject("Microsoft.XMLHTTP")}else if(window.XMLHttpRequest.isNormalizedObject){this._object=new e}else{this._object=new window.XMLHttpRequest}this._listeners=[]}function s(){return new i}function o(e){e._object.send(e._data);if(t&&!e._async){e.readyState=s.OPENED;f(e);while(e.readyState<s.DONE){e.readyState++;u(e);if(e._aborted){return}}}}function u(e){if(s.onreadystatechange){s.onreadystatechange.apply(e)}e.dispatchEvent({type:"readystatechange",bubbles:false,cancelable:false,timeStamp:(new Date).getTime()})}function a(e){var t=e.responseXML;var r=e.responseText;if(n&&r&&t&&!t.documentElement&&e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){t=new window.ActiveXObject("Microsoft.XMLDOM");t.async=false;t.validateOnParse=false;t.loadXML(r)}if(t){if(n&&t.parseError!=0||!t.documentElement||t.documentElement&&t.documentElement.tagName=="parsererror"){return null}}return t}function f(e){try{e.responseText=e._object.responseText}catch(t){}try{e.responseXML=a(e._object)}catch(t){}try{e.status=e._object.status}catch(t){}try{e.statusText=e._object.statusText}catch(t){}}function l(e){e._object.onreadystatechange=new window.Function}var e=window.XMLHttpRequest;var t=!!window.controllers;var n=!!window.document.namespaces;var r=n&&window.navigator.userAgent.match(/MSIE 7.0/);s.prototype=i.prototype;if(t&&e.wrapped){s.wrapped=e.wrapped}s.isNormalizedObject=true;s.UNSENT=0;s.OPENED=1;s.HEADERS_RECEIVED=2;s.LOADING=3;s.DONE=4;s.prototype.UNSENT=s.UNSENT;s.prototype.OPENED=s.OPENED;s.prototype.HEADERS_RECEIVED=s.HEADERS_RECEIVED;s.prototype.LOADING=s.LOADING;s.prototype.DONE=s.DONE;s.prototype.readyState=s.UNSENT;s.prototype.responseText="";s.prototype.responseXML=null;s.prototype.status=0;s.prototype.statusText="";s.prototype.priority="NORMAL";s.prototype.onreadystatechange=null;s.onreadystatechange=null;s.onopen=null;s.onsend=null;s.onabort=null;s.prototype.open=function(e,r,i,o,a){var c=e.toLowerCase();if(c=="connect"||c=="trace"||c=="track"){throw new Error(18)}delete this._headers;if(arguments.length<3){i=true}this._async=i;var h=this;var p=this.readyState;var d=null;if(n&&i){d=function(){if(p!=s.DONE){l(h);h.abort()}};window.attachEvent("onunload",d)}if(s.onopen){s.onopen.apply(this,arguments)}if(arguments.length>4){this._object.open(e,r,i,o,a)}else if(arguments.length>3){this._object.open(e,r,i,o)}else{this._object.open(e,r,i)}this.readyState=s.OPENED;u(this);this._object.onreadystatechange=function(){if(t&&!i){return}h.readyState=h._object.readyState;f(h);if(h._aborted){h.readyState=s.UNSENT;return}if(h.readyState==s.DONE){delete h._data;l(h);if(n&&i){window.detachEvent("onunload",d)}if(p!=h.readyState){u(h)}p=h.readyState}}};s.prototype.send=function(e){if(s.onsend){s.onsend.apply(this,arguments)}if(!arguments.length){e=null}if(e&&e.nodeType){e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml;if(!this._headers["Content-Type"]){this._object.setRequestHeader("Content-Type","application/xml")}}this._data=e;o(this)};s.prototype.abort=function(){if(s.onabort){s.onabort.apply(this,arguments)}if(this.readyState>s.UNSENT){this._aborted=true}this._object.abort();l(this);this.readyState=s.UNSENT;delete this._data};s.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()};s.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)};s.prototype.setRequestHeader=function(e,t){if(!this._headers){this._headers={}}this._headers[e]=t;return this._object.setRequestHeader(e,t)};s.prototype.addEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++){if(i[0]==e&&i[1]==t&&i[2]==n){return}}this._listeners.push([e,t,n])};s.prototype.removeEventListener=function(e,t,n){for(var r=0,i;i=this._listeners[r];r++){if(i[0]==e&&i[1]==t&&i[2]==n){break}}if(i){this._listeners.splice(r,1)}};s.prototype.dispatchEvent=function(e){var t={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};if(t.type=="readystatechange"&&this.onreadystatechange){(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[t])}for(var n=0,r;r=this._listeners[n];n++){if(r[0]==t.type&&!r[2]){(r[1].handleEvent||r[1]).apply(this,[t])}}};s.prototype.toString=function(){return"["+"object"+" "+"XMLHttpRequest"+"]"};s.toString=function(){return"["+"XMLHttpRequest"+"]"};if(!window.Function.prototype.apply){window.Function.prototype.apply=function(e,t){if(!t){t=[]}e.__func=this;e.__func(t[0],t[1],t[2],t[3],t[4]);delete e.__func}}window.XMLHttpRequest=s})()
